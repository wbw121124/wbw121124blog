import{r as t,d as e,l as a,c as r,o as n,a as s}from"./index-CNwpdlkB.js";import"./markdown-Bm0daGvZ.js";const o={class:"mkd component mt-6"},i={key:0,class:"text-center py-8"},l=["innerHTML"],c={__name:"PostPage",props:{props:{type:Object,required:!0}},setup(c){const u=c,d=t("加载中..."),m=t(!0);return e(async()=>{try{const t=u.props.name,e=await fetch(`./posts/${t}.md`);if(!e.ok)return d.value="文章未找到。",void(m.value=!1);const r=await e.text(),{metadata:n,content:s}=function(t){if(!t.startsWith("\x3c!--"))return{metadata:{},content:t};const e="--\x3e",a=function(t){const e=Array(t.length).fill(0);for(let a=1,r=0;a<t.length;a++){for(;r>0&&t[a]!==t[r];)r=e[r-1];t[a]===t[r]&&r++,e[a]=r}return e}(e);let r=0,n=-1;for(let l=0;l<t.length;l++){for(;r>0&&t[l]!==e[r];)r=a[r-1];if(t[l]===e[r]&&r++,3===r){n=l+1;break}}const s=t.substring(4,n-3).trim(),o=t.substring(n).trim(),i={};return s.split("\n").forEach(t=>{const[e,...a]=t.split(":");e&&a.length&&(i[e.trim()]=a.join(":").trim())}),{metadata:i,content:o}}(r);console.log(n);const o=await a(),i=await o.initMarkdownIt();d.value=i.render(s),m.value=!1}catch(t){d.value="加载文章时出错："+t.message+"\n"+t.stack,m.value=!1}}),(t,e)=>(n(),r("main",o,[m.value?(n(),r("div",i,[...e[0]||(e[0]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-transparent border-b-gray-900 dark:border-b-white mx-auto"},null,-1),s("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"正在加载文章...",-1)])])):(n(),r("div",{key:1,innerHTML:d.value},null,8,l))]))}};export{c as default};
