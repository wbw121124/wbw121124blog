import{r as t,d as e,l as a,c as n,o as r,j as s,a as l,t as o,k as i}from"./index-BnhOb1pF.js";import"./markdown-CSG7SlHF.js";const u={class:"mkd component mt-6"},c={key:0,class:"metadata"},d=["href"],m={key:1,class:"text-center py-8"},p=["innerHTML"],v={__name:"PostPage",props:{props:{type:Object,required:!0}},setup(v){const f=v,h=t("加载中..."),y=t(!0),k=t({ready:!1});return e(async()=>{try{const t=f.props.name,e=await fetch(`./posts/${t}.md`);if(!e.ok)return h.value="文章未找到。",void(y.value=!1);const n=await e.text(),{metadata:r,content:s}=function(t,e){if(!t.startsWith("\x3c!--"))return{metadata:{title:e},content:t};const a="--\x3e",n=function(t){const e=Array(t.length).fill(0);for(let a=1,n=0;a<t.length;a++){for(;n>0&&t[a]!==t[n];)n=e[n-1];t[a]===t[n]&&n++,e[a]=n}return e}(a);let r=0,s=-1;for(let u=0;u<t.length;u++){for(;r>0&&t[u]!==a[r];)r=n[r-1];if(t[u]===a[r]&&r++,3===r){s=u+1;break}}const l=t.substring(4,s-3).trim(),o=t.substring(s).trim(),i={};return l.split("\n").forEach(t=>{const[e,...a]=t.split(":");e&&a.length&&(i[e.trim()]=a.join(":").trim())}),{metadata:i,content:o}}(n,t),l=await a(),o=await l.initMarkdownIt();h.value=o.render(s),k.value=r,y.value=!1}catch(t){h.value="加载文章时出错："+t.message+"\n"+t.stack,y.value=!1}}),(t,e)=>(r(),n("main",u,[0!=k.value.ready||null==k.value.ready?(r(),n("div",c,[l("h2",null,o(k.value.title),1),l("p",null,"作者: "+o(k.value.author||"wbw121124"),1),l("p",null,"发布时间: "+o(k.value.date||"Unknow"),1),l("p",null,[e[0]||(e[0]=i("协议: ",-1)),l("a",{href:"https://creativecommons.org/licenses/"+(k.value.license||"BY-NC-SA")+"/4.0/deed.zh-hans"},"CC  "+o(k.value.license||"BY-NC-SA")+" 4.0",9,d)])])):s("",!0),y.value?(r(),n("div",m,[...e[1]||(e[1]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-transparent border-b-gray-900 dark:border-b-white mx-auto"},null,-1),l("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"正在加载文章...",-1)])])):(r(),n("div",{key:2,innerHTML:h.value},null,8,p))]))}};export{v as default};
